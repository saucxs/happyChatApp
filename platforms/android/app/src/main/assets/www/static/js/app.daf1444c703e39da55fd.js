webpackJsonp([1],{"+Mq+":function(e,t){},"3AVE":function(e,t){},Ct2a:function(e,t){},D1j8:function(e,t){},Epyb:function(e,t){},Fre0:function(e,t){},IISf:function(e,t){},JG5T:function(e,t){},JvXR:function(e,t){},NHnr:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={};s.d(n,"chatRobot",function(){return ot}),s.d(n,"register",function(){return ct}),s.d(n,"activateEmail",function(){return ut}),s.d(n,"login",function(){return mt}),s.d(n,"findPerson",function(){return pt}),s.d(n,"queryUserInfo",function(){return dt}),s.d(n,"queryUserInfoSpecial",function(){return ft}),s.d(n,"getNewFriends",function(){return gt}),s.d(n,"getAlreadyFriends",function(){return lt}),s.d(n,"getAlreadyGroups",function(){return ht}),s.d(n,"isFriendJudge",function(){return vt}),s.d(n,"messageList",function(){return _t}),s.d(n,"insertNewFriends",function(){return It}),s.d(n,"beFriends",function(){return bt}),s.d(n,"updateNewFriendsState",function(){return xt}),s.d(n,"getPrivateDetail",function(){return Ct}),s.d(n,"savePrivateMsg",function(){return wt}),s.d(n,"confirmEditorRemark",function(){return yt}),s.d(n,"confirmEditorInfo",function(){return kt}),s.d(n,"confirmDeleteFriend",function(){return Mt}),s.d(n,"confirmCreateGroup",function(){return Bt}),s.d(n,"confirmJoinGroup",function(){return $t}),s.d(n,"getGroupChat",function(){return Ft}),s.d(n,"saveGroupChatMsg",function(){return Tt}),s.d(n,"addGroupChatRelation",function(){return Gt}),s.d(n,"getGroupInformation",function(){return Et}),s.d(n,"judgeIsInGroup",function(){return Ut}),s.d(n,"exitChatGroup",function(){return Nt});var r={};s.d(r,"robotMsgGetter",function(){return Rt}),s.d(r,"newFriendGetter",function(){return Lt}),s.d(r,"msgListGetter",function(){return Ht}),s.d(r,"firstLoad",function(){return St}),s.d(r,"someOneInfoGetter",function(){return Ot}),s.d(r,"tabTipsGetter",function(){return Dt}),s.d(r,"groupMemberGetter",function(){return Pt}),s.d(r,"groupInfoGetter",function(){return jt});var a=s("7+uW"),o={name:"App",created:function(){window.screen.width>=768?this.screenRatio(100,1.3):this.screenRatio()},mounted:function(){this.getReqBySocket()},methods:{getReqBySocket:function(){var e=this;socketWeb.on("getresponse",function(t){console.log("获取新好友通知",t),e.$store.commit("newFriendMutation",t),e.$store.commit("friendReqTipsMutation",!0)})},dprRatio:function(){var e=navigator.userAgent,t=e.match(/Android[\S\s]+AppleWebkit\/(\d{3})/i),s=e.match(/U3\/((\d+|\.){5,})/i),n=s&&parseInt(s[i].split(",").join(""),10)>=80,r=navigator.appVersion.match(/(iphone|ipad|ipod)/gi),a=window.devicePixelRatio||1;return r||t&&t[1]>534||n||(a=1),a},screenRatio:function(e,t){var s=this.dprRatio();console.log(s,"dpr");var n=document.createElement("meta"),r=1/s;n.name="viewport",n.content="width=device-width,initial-scale="+r+", maximum-scale="+r+", minimum-scale="+r+", user-scalable=no";var a=document.getElementsByTagName("title")[0];a.parentNode.insertBefore(n,a);var i=e||100,o=t||1;document.documentElement.style.fontSize=i/2*s*o+"px"}}},c={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var u=s("VU/8")(o,c,!1,function(e){s("p+B0")},null,null).exports,m=s("/ocq"),p=s("Xxa5"),d=s.n(p),f=s("exGp"),g=s.n(f),l=s("Dd8w"),h=s.n(l),v={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"header"},[s("svg",{directives:[{name:"show",rawName:"v-show",value:e.goback,expression:"goback"}],staticClass:"icon goback",attrs:{"aria-hidden":"true"},on:{click:e.goBack}},[s("use",{attrs:{"xlink:href":"#iconback"}})]),e._v(" "),s("div",[e._v(e._s(e.title))]),e._v(" "),s("svg",{directives:[{name:"show",rawName:"v-show",value:1===e.currentTab||3===e.currentTab,expression:"currentTab === 1 || currentTab === 3"}],staticClass:"icon add",attrs:{"aria-hidden":"true"},on:{click:e.add}},[s("use",{attrs:{"xlink:href":"#iconadd-copy"}})]),e._v(" "),s("svg",{directives:[{name:"show",rawName:"v-show",value:e.groupInfo,expression:"groupInfo"}],staticClass:"icon add",attrs:{"aria-hidden":"true"},on:{click:e.lookGroupInfo}},[s("use",{attrs:{"xlink:href":"#icongroup-copy-white"}})]),e._v(" "),s("svg",{directives:[{name:"show",rawName:"v-show",value:e.userInfo,expression:"userInfo"}],staticClass:"icon add",attrs:{"aria-hidden":"true"},on:{click:e.lookUserInfo}},[s("use",{attrs:{"xlink:href":"#icongroup-copy-white"}})])])},staticRenderFns:[]};var _=s("VU/8")({name:"Header",props:["currentTab","chatTitle","goback","groupInfo","userInfo"],data:function(){return{}},computed:{title:function(){return 1===this.currentTab?"消息":2===this.currentTab?"机器人":3===this.currentTab?"通讯录":4===this.currentTab?"我":this.chatTitle}},methods:{add:function(){this.$router.push("/add")},lookGroupInfo:function(){var e="/group_info/"+this.$route.params.group_id;this.$router.push(e)},lookUserInfo:function(){var e="/user_info/"+this.$route.params.user_id;this.$router.push(e)},goBack:function(){this.$router.back()}}},v,!1,function(e){s("Fre0")},"data-v-1fee35d5",null).exports,I=s("mtWM"),b=s.n(I),x=s("NYxO"),C={name:"Footer",props:["currentTab"],data:function(){return{}},computed:h()({},Object(x.c)(["tabTipsGetter"]))},w={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"footer"},[s("router-link",{staticClass:"item",attrs:{to:"message"}},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{directives:[{name:"show",rawName:"v-show",value:1===e.currentTab,expression:"currentTab === 1"}],attrs:{"xlink:href":"#iconmessage-copy"}}),e._v(" "),s("use",{directives:[{name:"show",rawName:"v-show",value:1!==e.currentTab,expression:"currentTab !== 1"}],attrs:{"xlink:href":"#iconmessage"}})])]),e._v(" "),s("router-link",{staticClass:"item",attrs:{to:"robot"}},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{directives:[{name:"show",rawName:"v-show",value:2===e.currentTab,expression:"currentTab === 2"}],attrs:{"xlink:href":"#iconrobot-copy"}}),e._v(" "),s("use",{directives:[{name:"show",rawName:"v-show",value:2!==e.currentTab,expression:"currentTab !== 2"}],attrs:{"xlink:href":"#iconrobot"}})])]),e._v(" "),s("router-link",{staticClass:"item",class:this.tabTipsGetter.addFriendReq,attrs:{to:"contact_list"}},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{directives:[{name:"show",rawName:"v-show",value:3===e.currentTab,expression:"currentTab === 3"}],attrs:{"xlink:href":"#icongroup-copy"}}),e._v(" "),s("use",{directives:[{name:"show",rawName:"v-show",value:3!==e.currentTab,expression:"currentTab !== 3"}],attrs:{"xlink:href":"#icongroup"}})])]),e._v(" "),s("router-link",{staticClass:"item",attrs:{to:"me"}},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{directives:[{name:"show",rawName:"v-show",value:4===e.currentTab,expression:"currentTab === 4"}],attrs:{"xlink:href":"#iconmine-copy"}}),e._v(" "),s("use",{directives:[{name:"show",rawName:"v-show",value:4!==e.currentTab,expression:"currentTab !== 4"}],attrs:{"xlink:href":"#iconmine"}})])])],1)},staticRenderFns:[]};var y=s("VU/8")(C,w,!1,function(e){s("D1j8")},"data-v-0261a02a",null).exports,k={name:"chat-item",props:["me","name","img","msg","time","href"],components:{},data:function(){return{}},computed:{},watch:{},methods:{lookInfo:function(){this.href?this.$router.push("/user_info/"+this.href):window.location.href="https://github.com/saucxs/happy-chat-web"}}},M={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"chat-item"},[e.me?e._e():s("div",{staticClass:"otherchat"},[s("svg",{staticClass:"icon img",attrs:{"aria-hidden":"true"},on:{click:e.lookInfo}},[s("use",{attrs:{"xlink:href":"#iconrobot"}})]),e._v(" "),s("div",{staticClass:"nt"},[e.name?s("span",[e._v(e._s(e.name))]):e._e(),e.time?s("span",[e._v(e._s(e.time))]):e._e()]),e._v(" "),s("div",{staticClass:"msg"},[e._v(e._s(e.msg))])]),e._v(" "),e.me?s("div",{staticClass:"mychat"},[s("svg",{staticClass:"icon img",attrs:{"aria-hidden":"true"},on:{click:e.lookInfo}},[s("use",{attrs:{"xlink:href":"#iconniu"}})]),e._v(" "),s("div",{staticClass:"nt"},[e.time?s("span",[e._v(e._s(e.time))]):e._e(),e.name?s("span",[e._v(e._s(e.name))]):e._e()]),e._v(" "),s("div",{staticClass:"msg"},[e._v(e._s(e.msg))])]):e._e()])},staticRenderFns:[]};var B=s("VU/8")(k,M,!1,function(e){s("Ct2a")},"data-v-14165396",null).exports;function $(e){if(e){return/^\w+@\w+\.[a-z]{2,6}$/.test(e)}}function F(e){var t=new Date(parseInt(e));return t.getFullYear()+"-"+((t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-")+(t.getDate()+" ")+((t.getHours()<10?"0"+t.getHours():t.getHours())+":")+((t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+":")+(t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds())}var T={name:"Robot",data:function(){return{currentTab:2,inputMsg:"",time:F((new Date).getTime()),img:"",isScrollToBottom:!0,name:"",href:""}},components:{Header:_,Footer:y,ChatItem:B},methods:h()({},Object(x.b)(["chatRobot"]),{sendMessage:function(){var e=this;return g()(d.a.mark(function t(){var s;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(""!=e.inputMsg.trim()){t.next=2;break}return t.abrupt("return");case 2:return e.$store.commit("robotMsgMutation",{message:e.inputMsg}),s={message:e.inputMsg},t.next=6,e.chatRobot(s);case 6:e.inputMsg="";case 7:case"end":return t.stop()}},t,e)}))()},refresh:function(){setTimeout(function(){window.scrollTo(0,document.body.scrollHeight+1e4)},0)}}),watch:{robotMsgGetter:function(){this.refresh()}},computed:h()({},Object(x.c)(["robotMsgGetter"])),created:function(){var e=JSON.parse(localStorage.getItem("HappyChatUserInfo"));this.img=e.avator,this.name=e.name,this.href=e.user_id}},G={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"wrapper"},[s("Header",{attrs:{currentTab:e.currentTab}}),e._v(" "),s("ul",e._l(e.robotMsgGetter,function(t){return s("li",[t.user?s("ChatItem",{attrs:{msg:t.message,name:t.user,time:e.time}}):e._e(),e._v(" "),t.user?e._e():s("ChatItem",{attrs:{me:"true",name:e.name,href:e.href,img:e.img,msg:t.message,time:e.time}})],1)}),0),e._v(" "),s("div",{staticClass:"input-msg"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.inputMsg,expression:"inputMsg"}],ref:"message",domProps:{value:e.inputMsg},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.sendMessage(t))},input:function(t){t.target.composing||(e.inputMsg=t.target.value)}}}),e._v(" "),s("p",{staticClass:"btn",class:{enable:""!=e.inputMsg},on:{click:e.sendMessage}},[e._v("发送")])]),e._v(" "),s("Footer",{attrs:{currentTab:e.currentTab}})],1)},staticRenderFns:[]};var E=s("VU/8")(T,G,!1,function(e){s("3AVE")},"data-v-4da04475",null).exports,U={data:function(){return{name:"",password:"",email:"",messageBox:{visible:!1,message:"",hasCancel:!0,messageBoxEvent:""},disabledFlag:!1}},methods:h()({},Object(x.b)(["register","activateEmail"]),{actualRegister:function(){var e=this,t={name:this.name,password:this.password,email:this.email};if(""!==this.name&&""!==this.password&&""!==this.email&&$(this.email))this.register(t).then(function(t){t&&(t.success?(e.messageBox.messageBoxEvent="register",e.messageBox.visible=!0,e.messageBox.message="您已注册成功"):e.$message({message:t.message,type:"error"}))}).catch(function(t){console.log(t),e.$message({message:"服务器出错啦",type:"error"})});else{var s=void 0;""===this.name&&(s="请输入用户名"),""===this.password&&(s="请输入密码"),""===this.email&&(s="请输入邮箱"),$(this.email)||(s="请输入正确的邮箱"),this.$message({message:s,type:"warn"})}},startRegister:function(){this.disabledFlag=!0,this.actualRegister(),this.disabledFlag=!1},confirm:function(e){"register"===e&&(this.messageBox.visible=!1,this.$router.push("/login"))}})},N={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"login"},[s("Message-box",{attrs:{visible:this.messageBox.visible,messageBoxEvent:this.messageBox.messageBoxEvent,hasCancel:!1},on:{confirm:e.confirm}},[s("p",{attrs:{slot:"content"},slot:"content"},[e._v(e._s(this.messageBox.message))])]),e._v(" "),s("div",{staticClass:"wrapper fadeInDown"},[s("div",{attrs:{id:"formContent"}},[s("router-link",{attrs:{to:"/login"}},[s("h2",{staticClass:"inactive"},[e._v(" 登录 ")])]),e._v(" "),s("h2",{staticClass:"active"},[e._v("注册 ")]),e._v(" "),s("div",{staticClass:"fadeIn first"},[s("div",{staticClass:"fadeIn first"},[s("svg",{staticClass:"icon",attrs:{id:"icon",alt:"User Icon","aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#iconliaotian"}})])])]),e._v(" "),s("form",[s("div",[s("span",{staticClass:"normal-word"},[e._v("用户名：")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],staticClass:"fadeIn second",attrs:{type:"text",placeholder:"用户名"},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}})]),e._v(" "),s("div",[s("span",{staticClass:"normal-word"},[e._v("密码：")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"fadeIn third",attrs:{type:"password",placeholder:"密码"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),e._v(" "),s("div",[s("span",{staticClass:"normal-word"},[e._v("邮箱：")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"fadeIn third",attrs:{type:"text",placeholder:"邮箱"},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}})]),e._v(" "),s("input",{staticClass:"fadeIn fourth",attrs:{type:"button",disabed:e.disabledFlag,value:"注册"},on:{click:e.startRegister}})])],1)])],1)},staticRenderFns:[]};var R=s("VU/8")(U,N,!1,function(e){s("lw7P")},"data-v-c74ede70",null).exports,L=s("mvHQ"),H=s.n(L),S={name:"login",props:{},components:{},data:function(){return{name:"",password:"",messageBox:{visible:!1,message:"",hasCancel:!0,messageBoxEvent:""}}},computed:{},watch:{},methods:h()({},Object(x.b)(["login"]),{startLogin:function(){var e=this;if(""!==this.name&&""!==this.password){var t={name:this.name,password:this.password};this.login(t).then(function(t){t&&(t.success?(socketWeb.emit("login",t.userInfo.user_id),localStorage.setItem("HappyChatUserToken",t.token),localStorage.setItem("HappyChatUserInfo",H()(t.userInfo)),e.messageBox.messageBoxEvent="login",e.messageBox.visible=!0,e.messageBox.message="您已登录成功"):e.$message({message:t.message,type:"error"}))}).catch(function(t){console.log(t),e.$message({message:"服务器出错啦",type:"error"})})}else{var s=""===this.name?"请输入用户名":"请输入密码";this.$message({message:s,type:"warn"})}},confirm:function(e){"login"===e&&(this.messageBox.visible=!1,this.$router.push("/robot"))}})},O={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"login"},[s("Message-box",{attrs:{visible:this.messageBox.visible,messageBoxEvent:this.messageBox.messageBoxEvent,hasCancel:!1},on:{confirm:e.confirm}},[s("p",{attrs:{slot:"content"},slot:"content"},[e._v(e._s(this.messageBox.message))])]),e._v(" "),s("div",{staticClass:"wrapper fadeInDown"},[s("div",{attrs:{id:"formContent"}},[s("h2",{staticClass:"active"},[e._v(" 登录 ")]),e._v(" "),s("router-link",{attrs:{to:"/register"}},[s("h2",{staticClass:"inactive"},[e._v(" 注册 ")])]),e._v(" "),s("div",{staticClass:"fadeIn first"},[s("svg",{staticClass:"icon",attrs:{id:"icon",alt:"User Icon","aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#iconliaotian"}})])]),e._v(" "),s("form",[s("div",[s("span",{staticClass:"normal-word"},[e._v("用户名：")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],staticClass:"fadeIn second",attrs:{type:"text",placeholder:"用户名"},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}})]),e._v(" "),s("div",[s("span",{staticClass:"normal-word"},[e._v("密码：")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"fadeIn third",attrs:{type:"password",placeholder:"密码"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),e._v(" "),s("input",{staticClass:"fadeIn fourth",attrs:{type:"button",value:"登录"},on:{click:e.startLogin}})])],1)])],1)},staticRenderFns:[]};var D=s("VU/8")(S,O,!1,function(e){s("Epyb")},"data-v-9bf4f06a",null).exports,P={name:"activate",props:{},components:{},data:function(){return{code:this.$route.params.code,message:""}},created:function(){this.activateEmailFunction()},methods:h()({},Object(x.b)(["activateEmail"]),{goBackLogin:function(){this.$router.push("/login")},activateEmailFunction:function(){var e=this,t={code:this.code};this.activateEmail(t).then(function(t){t&&(e.message=t.message)}).catch(function(t){e.$message({message:"服务器出错啦",type:"error"})})}})},j={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"activate"},[s("div",{staticClass:"wrapper fadeInDown"},[s("div",{attrs:{id:"formContent"}},[s("h2",{staticClass:"active"},[e._v(" 激活邮箱 ")]),e._v(" "),s("div",{staticClass:"fadeIn first"},[s("svg",{staticClass:"icon",attrs:{id:"icon",alt:"User Icon","aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#iconliaotian"}})])]),e._v(" "),s("p",{staticClass:"message-tip"},[e._v(e._s(e.message))]),e._v(" "),s("p",{staticClass:"go-back-login",on:{click:e.goBackLogin}},[e._v("返回登录")])])])])},staticRenderFns:[]};var A=s("VU/8")(P,j,!1,function(e){s("Nact")},"data-v-2ee17941",null).exports,W={data:function(){return{currentTab:1,webSocket:""}},components:{Header:_,Footer:y},computed:h()({},Object(x.c)(["firstLoad","msgListGetter"])),methods:h()({},Object(x.b)(["messageList"]),{enterChat:function(e,t){var s="private"==e?"/private_chat/"+t:"/group_chat/"+t;this.$router.push(s)},getMsgBySocket:function(){var e=this;socketWeb.removeAllListeners("getPrivateMsg"),socketWeb.removeAllListeners("getGroupMsg"),socketWeb.on("getPrivateMsg",function(t){t.type="private",e.$store.commit("updateListMutation",t)}),socketWeb.on("getGroupMsg",function(t){t.type="group",e.$store.commit("updateListMutation",t)})}}),created:function(){this.firstLoad&&(this.messageList(),this.$store.commit("firstLoadMutation",!1)),this.getMsgBySocket()}},q={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"wrapper"},[s("Header",{attrs:{currentTab:e.currentTab}}),e._v(" "),s("ul",e._l(e.msgListGetter,function(t){return s("li",{on:{click:function(s){return e.enterChat(t.type,t.id)}}},["group"===t.type?s("a",{attrs:{href:""}},[s("img",{staticClass:"img",attrs:{src:t.group_avator,alt:""}}),t.unread?s("span",{staticClass:"group-unread"},[e._v(e._s(t.unread))]):e._e()]):e._e(),e._v(" "),"private"===t.type?s("a",{attrs:{href:""}},[s("img",{staticClass:"img",attrs:{src:t.avator,alt:""}}),t.unread?s("span",{staticClass:"private-unread"},[e._v(e._s(t.unread))]):e._e()]):e._e(),e._v(" "),s("div",{staticClass:"content"},["group"===t.type?s("div",{staticClass:"title"},[e._v(e._s(t.group_name)),s("span",[e._v(e._s(t.time))])]):e._e(),e._v(" "),"private"===t.type?s("div",{staticClass:"title"},[e._v(e._s(t.name)),s("span",[e._v(e._s(t.time))])]):e._e(),e._v(" "),s("div",{staticClass:"message"},[e._v(e._s(t.message))])])])}),0),e._v(" "),s("Footer",{attrs:{currentTab:e.currentTab}})],1)},staticRenderFns:[]};var V=s("VU/8")(W,q,!1,function(e){s("JvXR")},"data-v-1a2a0a1e",null).exports,J={components:{Header:_},data:function(){return{chatTitle:"加人,进群,建群",inputContent:""}},computed:{},watch:{},methods:{findPeople:function(){var e="/add_seach/user/"+this.inputContent;this.$router.push(e)},findGroup:function(){var e="/add_seach/group/"+this.inputContent;this.$router.push(e)},createGroup:function(){this.$router.push("/creat_group")}},mounted:function(){}},z={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"wrapper"},[s("Header",{attrs:{goback:"true",chatTitle:e.chatTitle}}),e._v(" "),s("div",{staticClass:"creat-group",on:{click:e.createGroup}},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icongroup-copy"}})]),e._v(" "),s("span",[e._v("建一个群")]),e._v(" "),s("svg",{staticClass:"icon icon-right",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#iconright"}})])]),e._v(" "),s("div",{staticClass:"search"},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#iconsousuo"}})]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.inputContent,expression:"inputContent"}],attrs:{type:"text",placeholder:"在这边输入用户名或者群名称哦"},domProps:{value:e.inputContent},on:{input:function(t){t.target.composing||(e.inputContent=t.target.value)}}})]),e._v(" "),s("div",{staticClass:"choose"},[s("p",{directives:[{name:"show",rawName:"v-show",value:""!=this.inputContent,expression:"this.inputContent !='' "}],staticClass:"find-people",on:{click:e.findPeople}},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-my-copy"}})]),s("span",[e._v("加人:  "+e._s(this.inputContent))])]),e._v(" "),s("p",{directives:[{name:"show",rawName:"v-show",value:""!=this.inputContent,expression:"this.inputContent !='' "}],staticClass:"find-group",on:{click:e.findGroup}},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-group1"}})]),s("span",[e._v("进群:  "+e._s(this.inputContent))])])])],1)},staticRenderFns:[]};var X=s("VU/8")(J,z,!1,function(e){s("+Mq+")},"data-v-6caa7392",null).exports,Q={components:{Header:_},data:function(){return{chatTitle:"查找中...",userDataList:[],groupDataList:[]}},computed:{},watch:{},methods:h()({},Object(x.b)(["findPerson","getGroupInformation"]),{getChatTitle:function(){var e=this.$route.params.username,t=this.$route.params.groupname;e?(this.chatTitle="查找结果（人）",this.findPeople(e)):t&&(this.chatTitle="查找结果（群）",this.findGroup(t))},findPeople:function(e){var t=this;this.findPerson({name:e}).then(function(e){e.success?t.userDataList=e.data.userInfo:t.$message({message:"服务器出错啦",type:"error"})}).catch(function(e){console.log("err",e);var s=e.error;t.$message({message:s,type:"error"})})},findGroup:function(e){var t=this;this.getGroupInformation({groupName:e}).then(function(e){e.success?t.groupDataList=e.data.groupInfo:t.$message({message:"服务器出错啦",type:"error"})}).catch(function(e){console.log("err",e);var s=e.error;t.$message({message:s,type:"error"})})},enterUserCard:function(e){this.$router.push("/user_info/"+e)},enterGroupCard:function(e){this.$router.push("/group_info/"+e)}}),mounted:function(){this.getChatTitle()}},Y={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"wrapper"},[s("Header",{attrs:{goback:"true",chatTitle:e.chatTitle}}),e._v(" "),s("ul",[e._l(e.userDataList,function(t){return e.userDataList!==[]?s("li",[s("div",{staticClass:"people-box",on:{click:function(s){return e.enterUserCard(t.id)}}},[s("img",{attrs:{src:t.avator,alt:""}}),e._v(" "),s("div",{staticClass:"content"},[s("p",[e._v(e._s(t.name)+"\r\n\t\t\t\t\t\t"),(t.sex=0)?s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-icon1"}})]):s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-icon"}})])]),e._v(" "),s("p",[t.place?s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-placeholder"}})]):e._e(),e._v(" "+e._s(t.place)+"\r\n\t\t\t\t\t\t"),t.github?s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-github"}})]):e._e(),e._v(" "+e._s(t.github)+"\r\n\t\t\t\t\t")])])])]):e._e()}),e._v(" "),e._l(e.groupDataList,function(t){return e.groupDataList!==[]?s("li",[s("div",{staticClass:"people-box",on:{click:function(s){return e.enterGroupCard(t.group_id)}}},[s("img",{attrs:{src:t.group_avator,alt:""}}),e._v(" "),s("div",{staticClass:"content"},[s("p",{staticClass:"group-creater"},[e._v(e._s(t.group_name)+" "),s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-group_fill"}})]),e._v(" "),s("span",[e._v(" "+e._s(t.group_creater))])]),e._v(" "),s("p",[s("span",[e._v("群公告："+e._s(t.group_notice))])])])])]):e._e()})],2)],1)},staticRenderFns:[]};var K=s("VU/8")(Q,Y,!1,function(e){s("xdN8")},"data-v-39017157",null).exports,Z={components:{Header:_},data:function(){return{userInfo:{},myInfo:{},remark:"",isMyFriend:!1,isHisFriend:!1,isAddingMe:!1,isMe:!1,messageBox:{visible:!1,title:"提示",message:"",canInput:!1,hasCancel:!0,messageBoxEvent:"",canEditorInfo:!1}}},computed:h()({},Object(x.c)(["newFriendGetter"])),methods:h()({},Object(x.b)(["queryUserInfo","isFriendJudge","confirmEditorRemark","confirmEditorInfo","confirmDeleteFriend","updateNewFriendsState","beFriends"]),{getInfo:function(){var e=this;if(this.isMe)this.userInfo=this.myInfo;else{var t={user_id:this.$route.params.user_id};this.queryUserInfo(t).then(function(t){e.userInfo=t.data.userInfo[0]}).catch(function(e){console.log("err1",e)})}},isFriend:function(){var e=this,t={other_user_id:this.$route.params.user_id};this.isFriendJudge(t).then(function(t){0!=t.data.isMyFriend.length&&(e.isMyFriend=!0,e.remark=t.data.isMyFriend[0].remark),0!=t.data.isHisFriend.length&&(e.isHisFriend=!0)}).catch(function(e){console.log("err1",e)})},isAddingMeFun:function(){var e=this;this.newFriendGetter.forEach(function(t){t.from_user!=e.$route.params.user_id||1===t.status||(e.isAddingMe=!0)})},goGithub:function(){this.userInfo.github?window.location.href=this.userInfo.github:this.$message({message:"对方尚未放他的github链接哦",type:"error"})},goWebsite:function(){this.userInfo.website?window.location.href=this.userInfo.website:this.$message({message:"对方尚未放他的网站链接哦",type:"error"})},enterReqPage:function(){var e="/user_info/verify/"+this.$route.params.user_id;this.$router.push(e)},goChat:function(){var e="/private_chat/"+this.$route.params.user_id;this.$router.push(e)},stay:function(){var e="/user_info/"+this.$route.params.user_id;this.$router.push(e)},editorRemark:function(){this.messageBox.messageBoxEvent="editorRemark",this.messageBox.visible=!0,this.messageBox.canInput=!0,this.messageBox.title="修改备注"},editorInfo:function(){this.messageBox.messageBoxEvent="editorInfo",this.messageBox.visible=!0,this.messageBox.canEditorInfo=!0,this.messageBox.title="修改我的信息"},shieldIt:function(){},deFriended:function(){this.messageBox.messageBoxEvent="delFriend",this.messageBox.visible=!0,this.messageBox.message="确定要删除此好友？"},agreeBeFriend:function(){var e=this;return g()(d.a.mark(function t(){return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.beFriends({other_user_id:e.$route.params.user_id}),t.next=3,e.updateNewFriends();case 3:e.messageBox.messageBoxEvent="agreeBeFriend",e.messageBox.visible=!0,e.messageBox.message="添加好友成功，进入聊天？";case 6:case"end":return t.stop()}},t,e)}))()},updateNewFriends:function(){var e=this;return g()(d.a.mark(function t(){return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.updateNewFriendsState({from_user:e.$route.params.user_id});case 1:case"end":return t.stop()}},t,e)}))()},cancel:function(e){this.messageBox.visible=!1,this.messageBox.canInput=!1,this.messageBox.message=null,"agreeBeFriend"===e&&location.reload()},confirm:function(e){var t=this;if("delFriend"===e){var s={user_id:this.myInfo.user_id,other_user_id:this.$route.params.user_id};this.confirmDeleteFriend(s).then(function(e){if(e){t.messageBox.visible=!1,t.messageBox.message=null;var s={action:"delete",id:t.$route.params.user_id};t.$store.commit("updateListMutation",s),t.$message({message:"删除此好友成功",type:"success"}),t.isMyFriend=!1}}).catch(function(e){console.log("err",e)})}if("agreeBeFriend"===e&&this.goChat(),"editorRemark"===e.messageBoxEvent){var n={remark:e.canInputText,other_user_id:this.$route.params.user_id};this.confirmEditorRemark(n).then(function(s){s&&(t.remark=e.canInputText,t.messageBox.canInput=!1,t.messageBox.visible=!1)})}if("editorInfo"===e.messageBoxEvent){var r=new RegExp(/^((https?|ftp|file):\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$/);if(e.myInfo.website){if(!r.test(e.myInfo.website))return void this.$message({message:"请输入正确的网址",type:"error"});e.myInfo.website="http"!=e.myInfo.website.substr(0,4)?"http://"+e.myInfo.website:e.myInfo.website}if(e.myInfo.github){if(!r.test(e.myInfo.github))return void this.$message({message:"请输入正确的网址",type:"error"});e.myInfo.github="http"!=e.myInfo.github.substr(0,4)?"http://"+e.myInfo.github:e.myInfo.github}var a={github:e.myInfo.github,website:e.myInfo.website,sex:e.myInfo.sex,place:e.myInfo.place};this.confirmEditorInfo(a).then(function(s){s&&(localStorage.setItem("HappyChatUserInfo",H()(e.myInfo)),t.messageBox.visible=!1)})}}}),created:function(){var e=this;return g()(d.a.mark(function t(){return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.myInfo=JSON.parse(localStorage.getItem("HappyChatUserInfo")),e.isMe=e.myInfo.user_id==e.$route.params.user_id,t.next=4,e.isAddingMeFun();case 4:return t.next=6,e.isFriend();case 6:e.getInfo();case 7:case"end":return t.stop()}},t,e)}))()}},ee={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"wrapper"},[s("Message-box",{attrs:{messageBoxEvent:this.messageBox.messageBoxEvent,visible:this.messageBox.visible,title:this.messageBox.title,canInput:this.messageBox.canInput,hasCancel:this.messageBox.hasCancel},on:{cancel:e.cancel,confirm:e.confirm}},[s("p",{attrs:{slot:"content"},slot:"content"},[e._v(e._s(this.messageBox.message))])]),e._v(" "),this.isMe?s("Message-box",{attrs:{messageBoxEvent:this.messageBox.messageBoxEvent,visible:this.messageBox.visible,title:this.messageBox.title,canEditorInfo:this.messageBox.canEditorInfo,myInfo:this.myInfo,hasCancel:this.messageBox.hasCancel},on:{cancel:e.cancel,confirm:e.confirm}},[s("p",{attrs:{slot:"content"},slot:"content"},[e._v(e._s(this.messageBox.message))])]):e._e(),e._v(" "),s("Header",{attrs:{goback:"true",chatTitle:"用户资料"}}),e._v(" "),s("div",{staticClass:"content"},[s("div",{staticClass:"content-box"},[s("svg",{staticClass:"icon",attrs:{id:"icon",alt:"User Icon","aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#iconniu"}})])]),e._v(" "),s("p",{staticClass:"href"},[s("span",{on:{click:e.goGithub}},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#iconGitHub"}})])]),e._v(" "),s("span",{on:{click:e.goWebsite}},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#iconWorld-WideWeb"}})])])]),e._v(" "),this.isMyFriend?s("p",[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#iconbeizhu"}})]),e._v(" "),s("span",[e._v("备注")]),e._v("："+e._s(this.remark)+"\n    ")]):e._e(),e._v(" "),s("p",[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#iconmine"}})]),e._v(" "),s("span",[e._v("用户名")]),e._v("："+e._s(e.userInfo.name)+"\n    ")]),e._v(" "),s("p",[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[0===e.userInfo.sex?s("use",{attrs:{"xlink:href":"#iconxingbienan"}}):s("use",{attrs:{"xlink:href":"#iconxingbienv"}})]),e._v(" "),s("span",[e._v("性别")]),e._v("："+e._s(0===e.userInfo.sex?"男":"女")+"\n    ")]),e._v(" "),s("p",[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#iconplaceholder"}})]),e._v(" "),s("span",[e._v("来自")]),e._v("："+e._s(e.userInfo.place)+"\n    ")])]),e._v(" "),this.isAddingMe?s("div",{staticClass:"action"},[s("span",{staticClass:"add-as-friend",on:{click:e.agreeBeFriend}},[e._v("通过验证")])]):e._e(),e._v(" "),!0===this.isMyFriend&&!0===this.isHisFriend?s("div",{staticClass:"action"},[s("span",{staticClass:"editor-remark",on:{click:e.editorRemark}},[e._v("修改备注")]),e._v(" "),s("span",{staticClass:"go-chat",on:{click:e.goChat}},[e._v("发消息")]),e._v(" "),s("span",{staticClass:"shield-it",on:{click:e.shieldIt}},[e._v("屏蔽此人")]),e._v(" "),s("span",{staticClass:"de-friended",on:{click:e.deFriended}},[e._v("删除好友")])]):e._e(),e._v(" "),!0===this.isMyFriend&&!1===this.isHisFriend?s("div",{staticClass:"action"},[s("span",{staticClass:"de-friended",on:{click:e.deFriended}},[e._v("删除好友")]),e._v(" "),s("span",{staticClass:"add-as-friend",on:{click:e.enterReqPage}},[e._v("让对方重新加自己为好友")])]):e._e(),e._v(" "),!1===this.isMyFriend&&!0===this.isHisFriend&&!1===this.isAddingMe?s("div",{staticClass:"action"},[s("span",{staticClass:"add-as-friend",on:{click:e.enterReqPage}},[e._v("加为好友")])]):e._e(),e._v(" "),!1===this.isMyFriend&&!1===this.isHisFriend&&!1===this.isAddingMe&&!1===this.isMe?s("div",{staticClass:"action"},[s("span",{staticClass:"add-as-friend",on:{click:e.enterReqPage}},[e._v("加为好友")])]):e._e(),e._v(" "),this.isMe?s("div",{staticClass:"action"},[s("span",{staticClass:"editor-info",on:{click:e.editorInfo}},[e._v("编辑我的信息")])]):e._e()],1)},staticRenderFns:[]};var te=s("VU/8")(Z,ee,!1,function(e){s("lneO")},"data-v-42d4becf",null).exports,se={components:{Header:_},data:function(){return{textAreaContent:"您好，我想加您为好友",messageBox:{visible:!1,message:"",hasCancel:!0,messageBoxEvent:""},fromUserInfo:{}}},computed:{},watch:{},methods:h()({},Object(x.b)(["insertNewFriends"]),{send:function(){var e=this;socketWeb.emit("sendRequest",{from_user:this.fromUserInfo.user_id,to_user:this.$route.params.user_id,name:this.fromUserInfo.name,avator:this.fromUserInfo.avator,sex:this.fromUserInfo.sex,content:this.textAreaContent,time:F((new Date).getTime())});var t={to_user:this.$route.params.user_id,content:this.textAreaContent,time:F((new Date).getTime()),status:0};this.insertNewFriends(t).then(function(t){t&&(e.messageBox.messageBoxEvent="send",e.messageBox.visible=!0,e.messageBox.message="发送成功，等候回复哦")})},confirm:function(e){if("send"===e){this.$router.push("/message")}},cancel:function(e){this.messageBox.visible=!1}}),mounted:function(){this.fromUserInfo=JSON.parse(localStorage.getItem("HappyChatUserInfo"))}},ne={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"wrapper"},[s("Message-box",{attrs:{messageBoxEvent:this.messageBox.messageBoxEvent,visible:this.messageBox.visible,hasCancel:this.messageBox.hasCancel},on:{cancel:e.cancel,confirm:e.confirm}},[s("p",{attrs:{slot:"content"},slot:"content"},[e._v(e._s(this.messageBox.message))])]),e._v(" "),s("Header",{attrs:{goback:"true",chatTitle:"用户申请"}}),e._v(" "),s("p",[e._v("你需要发送验证申请，等对方通过")]),e._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.textAreaContent,expression:"textAreaContent"}],attrs:{rows:"5"},domProps:{value:e.textAreaContent},on:{input:function(t){t.target.composing||(e.textAreaContent=t.target.value)}}}),e._v(" "),s("p",{staticClass:"send-btn",on:{click:e.send}},[e._v("发送")])],1)},staticRenderFns:[]};var re=s("VU/8")(se,ne,!1,function(e){s("NjBh")},"data-v-11c1e1bc",null).exports,ae={components:{Header:_,Footer:y},data:function(){return{currentTab:3,friend:"hover",group:"",alreadyFriends:[],alreadyGroups:[]}},computed:{},watch:{},methods:h()({},Object(x.b)(["getAlreadyFriends","getAlreadyGroups"]),{enterIt:function(e,t){"friend"===t?this.$router.push("/user_info/"+e):"group"===t&&this.$router.push("/group_info/"+e)},showFriends:function(){this.friend="hover",this.group=""},showGroups:function(){this.friend="",this.group="hover"},newFriendList:function(){this.$router.push({path:"contact_list/new_friends"})},alreadyFriendsList:function(){var e=this;this.getAlreadyFriends({user_id:this.userInfo.user_id}).then(function(t){t&&(e.alreadyFriends=t.data.alreadyFriends)})},alreadyGroupsList:function(){var e=this;this.getAlreadyGroups({user_id:this.userInfo.user_id}).then(function(t){t&&(e.alreadyGroups=t.data.alreadyGroups)})}}),mounted:function(){this.userInfo=JSON.parse(localStorage.getItem("HappyChatUserInfo")),this.alreadyFriendsList(),this.alreadyGroupsList()}},ie={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"wrapper"},[s("Header",{attrs:{currentTab:e.currentTab}}),e._v(" "),s("div",{staticClass:"new-friend",on:{click:e.newFriendList}},[s("svg",{staticClass:"icon img",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#iconfriends"}})]),s("span",[e._v("新朋友")]),e._v(" "),s("svg",{staticClass:"icon enter",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#iconright"}})])]),e._v(" "),s("p",{staticClass:"tab"},[s("span",{class:e.friend,on:{click:e.showFriends}},[e._v("朋友")]),s("span",{class:e.group,on:{click:e.showGroups}},[e._v("群组")])]),e._v(" "),e.friend?s("ul",e._l(e.alreadyFriends,function(t,n){return s("li",[s("div",{staticClass:"list-box",on:{click:function(s){return e.enterIt(t.other_user_id,"friend")}}},[s("img",{attrs:{src:t.avator,alt:""}}),e._v(" "),s("div",{staticClass:"content"},[s("p",[e._v(e._s(t.name))]),e._v(" "),s("p",[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[0===t.sex?s("use",{attrs:{"xlink:href":"#iconxingbienan"}}):s("use",{attrs:{"xlink:href":"#iconxingbienv"}})])])]),e._v(" "),s("div",{staticClass:"remark"},[e._v(e._s(""===t.remark?"没有留下备注~":t.remark))])])])}),0):e._e(),e._v(" "),e.group?s("ul",e._l(e.alreadyGroups,function(t,n){return s("li",[s("div",{staticClass:"list-box",on:{click:function(s){return e.enterIt(t.group_id,"group")}}},[s("img",{attrs:{src:t.avator,alt:""}}),e._v(" "),s("div",{staticClass:"content"},[s("p",[e._v(e._s(t.group_name))]),e._v(" "),s("p",[e._v("群主："+e._s(t.group_creater))])]),e._v(" "),s("div",{staticClass:"remark"},[e._v(e._s(""===t.group_notice?"没有留下公告~":t.group_notice.slice(0,10)+"..."))])])])}),0):e._e(),e._v(" "),s("Footer",{attrs:{currentTab:e.currentTab}})],1)},staticRenderFns:[]};var oe=s("VU/8")(ae,ie,!1,function(e){s("tLs2")},"data-v-6a6aad67",null).exports,ce={components:{Header:_},data:function(){return{userInfo:{},time:""}},computed:h()({},Object(x.c)(["newFriendGetter"])),watch:{},methods:h()({},Object(x.b)(["getNewFriends","beFriends","updateNewFriendsState"]),{enterIt:function(e){this.$router.push("/user_info/"+e)},agreeBeFriend:function(e){var t=this;return g()(d.a.mark(function s(){return d.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:t.beFriends({other_user_id:e,time:F((new Date).getTime())}),t.updateNewFriends(e);case 2:case"end":return s.stop()}},s,t)}))()},updateNewFriends:function(e){var t=this;return g()(d.a.mark(function s(){var n,r;return d.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:t.updateNewFriendsState({from_user:e}),n={},t.newFriendGetter.forEach(function(t){t.from_user==e&&(t.status=1,n={avator:t.avator,id:e,other_user_id:e,message:"我们已成为好友，开始聊天吧！",time:F((new Date).getTime()),name:t.name,type:"private",action:"push"})}),t.$store.commit("updateListMutation",n),r={from_user:t.userInfo.user_id,to_user:e,name:t.userInfo.name,avator:t.userInfo.avator,message:n.message,type:"private",action:"request",status:"1",time:F((new Date).getTime())},socketWeb.emit("sendPrivateMsg",r);case 6:case"end":return s.stop()}},s,t)}))()}}),created:function(){this.userInfo=JSON.parse(localStorage.getItem("HappyChatUserInfo")),this.$store.commit("friendReqTipsMutation",!1),this.getNewFriends({user_id:this.userInfo.user_id})}},ue={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"wrapper"},[s("Header",{attrs:{goback:"true",chatTitle:"新好友通知"}}),e._v(" "),s("ul",e._l(e.newFriendGetter,function(t){return s("li",[s("div",{staticClass:"list-box",on:{click:function(s){return e.enterIt(t.from_user)}}},[s("img",{attrs:{src:t.avator,alt:""}}),e._v(" "),s("div",{staticClass:"content"},[s("p",[e._v(e._s(t.name))]),e._v(" "),s("p",[e._v(e._s(t.content))])])]),e._v(" "),s("div",{staticClass:"result"},[0===t.status?s("span",{staticClass:"agree-btn",on:{click:function(s){return e.agreeBeFriend(t.from_user)}}},[e._v("同意")]):e._e(),e._v(" "),1===t.status?s("span",[e._v("已通过验证")]):e._e()])])}),0)],1)},staticRenderFns:[]};var me=s("VU/8")(ce,ue,!1,function(e){s("IISf")},"data-v-6aec41f0",null).exports,pe={components:{Header:_,ChatItem:B},data:function(){return{inputMsg:"",privateDetail:[],toUserInfo:{to_user:"",avator:"",sex:"",place:"",status:""},isMyFriend:!1,isHisFriend:!1,fromUserInfo:{},btnInfo:"发送"}},computed:h()({},Object(x.c)(["someOneInfoGetter"])),watch:{privateDetail:function(){this.refresh()}},methods:h()({},Object(x.b)(["getPrivateDetail","isFriendJudge","queryUserInfoSpecial","savePrivateMsg"]),{getPrivateMsg:function(){var e=this,t={to_user:this.toUserInfo.to_user};this.getPrivateDetail(t).then(function(t){if(t.success){if(e.privateDetail=t.data.privateDetail,0==e.privateDetail.length)return;e.privateDetail.forEach(function(e){e.time=F(e.time),e.message=e.message.split(":")[1]})}}).catch(function(t){var s=t.response.error;e.$message({message:s,type:"error"})})},sendMessage:function(){""!=this.inputMsg.trim()&&(this.isMyFriend?this.isHisFriend?(this.sendMsgBySocket(),this.saveMsgByDB()):this.$message({message:"您不是ta的好友，请先加ta为好友",type:"error"}):this.$message({message:"ta不是您的好友，请先加ta为好友",type:"error"}))},sendMsgBySocket:function(){var e={from_user:this.fromUserInfo.user_id,to_user:this.toUserInfo.to_user,name:this.fromUserInfo.name,avator:this.fromUserInfo.avator,message:this.inputMsg,type:"private",status:"1",time:F((new Date).getTime())};socketWeb.emit("sendPrivateMsg",e),this.$store.commit("updateListMutation",e)},saveMsgByDB:function(){var e=this,t={from_user:this.fromUserInfo.user_id,to_user:this.toUserInfo.to_user,name:this.fromUserInfo.name,avator:this.fromUserInfo.avator,message:this.inputMsg,status:"1",time:F((new Date).getTime())};this.savePrivateMsg(t).then(function(s){s&&(e.inputMsg="",e.privateDetail.push(t))}).catch(function(t){var s=t.response.error;e.$message({message:s,type:"error"})})},getMsgBySocket:function(){var e=this;socketWeb.removeAllListeners("getPrivateMsg"),socketWeb.on("getPrivateMsg",function(t){if(t.from_user!=e.toUserInfo.to_user)return t.chatOfNow=!1,void e.$store.commit("updateListMutation",t);t.chatOfNow=!0,e.$store.commit("updateListMutation",t),e.privateDetail.push(t)})},isFriend:function(){var e=this,t={other_user_id:this.toUserInfo.to_user};this.isFriendJudge(t).then(function(t){t&&(e.isMyFriend=0!==t.data.isMyFriend.length,e.isHisFriend=0!==t.data.isHisFriend.length)}).catch(function(t){var s=t.response.error;e.$message({message:s,type:"error"})})},resetUnred:function(){this.$store.commit("resetUnredMutation",this.toUserInfo.to_user)},refresh:function(){setTimeout(function(){window.scrollTo(0,document.body.scrollHeight+1e4)},0)}}),created:function(){this.toUserInfo.to_user=this.$route.params.user_id,this.fromUserInfo=JSON.parse(localStorage.getItem("HappyChatUserInfo")),this.isFriend(),this.resetUnred(),this.getPrivateMsg(),this.getMsgBySocket(),this.queryUserInfoSpecial({user_id:this.toUserInfo.to_user})}},de={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"wrapper"},[s("Header",{attrs:{goback:"true",userInfo:"true",chatTitle:e.someOneInfoGetter.name}}),e._v(" "),s("ul",e._l(e.privateDetail,function(t){return s("li",[e.fromUserInfo.user_id===t.from_user?s("ChatItem",{attrs:{href:t.from_user,img:t.avator,me:"true",msg:t.message,name:t.name,time:t.time}}):s("ChatItem",{attrs:{img:t.avator,msg:t.message,href:t.from_user,name:t.name,time:t.time}})],1)}),0),e._v(" "),s("div",{staticClass:"input-msg"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.inputMsg,expression:"inputMsg"}],ref:"message",domProps:{value:e.inputMsg},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.sendMessage(t))},input:function(t){t.target.composing||(e.inputMsg=t.target.value)}}}),e._v(" "),s("p",{staticClass:"btn",class:{enable:""!=e.inputMsg},on:{click:e.sendMessage}},[e._v(e._s(e.btnInfo))])])],1)},staticRenderFns:[]};var fe=s("VU/8")(pe,de,!1,function(e){s("R/S2")},"data-v-bad2f666",null).exports,ge={name:"message",data:function(){return{currentTab:4,messageBox:{visible:!1,message:"",hasCancel:!0,messageBoxEvent:""},userInfo:{}}},components:{Header:_,Footer:y},methods:{goInfo:function(){var e="/user_info/"+this.userInfo.user_id;this.$router.push(e)},logout:function(){this.messageBox.messageBoxEvent="logOut",this.messageBox.visible=!0,this.messageBox.message="确定退出？"},cancel:function(e){this.messageBox.visible=!1},confirm:function(e){if("logOut"===e){socketWeb.emit("logout",this.userInfo.user_id),localStorage.removeItem("HappyChatUserToken"),localStorage.removeItem("HappyChatUserInfo");var t=this;setTimeout(function(){t.$router.push({path:"/login"})},1e3)}},goGithub:function(){this.userInfo.github?window.location.href=this.userInfo.github:this.$message({message:"对方尚未放他的github链接哦",type:"error"})},goWebsite:function(){this.userInfo.website?window.location.href=this.userInfo.website:this.$message({message:"对方尚未放他的网站链接哦",type:"error"})}},mounted:function(){this.userInfo=JSON.parse(localStorage.getItem("HappyChatUserInfo"))}},le={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"wrapper"},[s("Message-box",{attrs:{messageBoxEvent:this.messageBox.messageBoxEvent,visible:this.messageBox.visible,hasCancel:this.messageBox.hasCancel},on:{cancel:e.cancel,confirm:e.confirm}},[s("p",{attrs:{slot:"content"},slot:"content"},[e._v(e._s(this.messageBox.message))])]),e._v(" "),s("Header",{attrs:{currentTab:e.currentTab}}),e._v(" "),s("div",{staticClass:"content"},[s("div",{staticClass:"content-box"},[s("img",{attrs:{src:e.userInfo.avator,alt:""}}),e._v(" "),s("p",{staticClass:"name"},[e._v(e._s(e.userInfo.name))]),e._v(" "),s("p",{staticClass:"href"},[s("span",{on:{click:e.goGithub}},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#iconGitHub"}})])]),e._v(" "),s("span",{on:{click:e.goWebsite}},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#iconWorld-WideWeb"}})])])]),e._v(" "),s("p",{staticClass:"user-intro"},[e._v(e._s(""==e.userInfo.intro?"没有留下介绍~":e.userInfo.intro))]),e._v(" "),s("p",{staticClass:"user-more"},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"},on:{click:e.goInfo}},[s("use",{attrs:{"xlink:href":"#iconacmore"}})])])])]),e._v(" "),s("div",{staticClass:"action",on:{click:e.logout}},[s("span",{staticClass:"logout"},[e._v("退出登录")])]),e._v(" "),s("Footer",{attrs:{currentTab:e.currentTab}})],1)},staticRenderFns:[]};var he=s("VU/8")(ge,le,!1,function(e){s("JG5T")},"data-v-2bec930a",null).exports,ve={data:function(){return{userInfo:{},groupInfo:{group_name:"",group_notice:"",group_avator:"#icongroup",group_creater:"",creater_time:""},group_id:"",messageBox:{visible:!1,message:"",messageBoxEvent:""}}},computed:{},components:{Header:_},methods:h()({},Object(x.b)(["confirmCreateGroup","confirmJoinGroup"]),{createGroup:function(){var e=this;if(this.groupInfo.creater_time=F((new Date).getTime()),this.groupInfo.group_creater=this.userInfo.name,this.groupInfo.group_name&&this.groupInfo.group_notice)this.confirmCreateGroup(this.groupInfo).then(function(t){if(t.success){e.group_id=t.data.group_id;var s={message:"创建群成功！",time:e.groupInfo.creater_time,group_name:e.groupInfo.group_name,group_avator:e.groupInfo.group_avator,type:"group",action:"push",id:e.group_id,group_id:e.group_id};e.$store.commit("updateListMutation",s),e.joinGroup()}else e.$message({message:"服务器出错啦",type:"error"})}).catch(function(t){var s=t.response.error;e.$message({message:s,type:"error"})});else{var t=void 0;""===this.groupInfo.group_name.trim()&&(t="请输入群名"),""===this.this.groupInfo.group_notice.trim()&&(t="请输入群公告"),this.$message({message:t,type:"warn"})}},joinGroup:function(){var e=this;this.confirmJoinGroup({group_id:this.group_id}).then(function(t){t.success?(e.messageBox.messageBoxEvent="createGroup",e.messageBox.visible=!0,e.messageBox.message="创建群成功"):e.$message({message:"服务器出错啦",type:"error"})}).catch(function(t){var s=t.response.error;e.$message({message:s,type:"error"})})},confirm:function(e){"createGroup"===e&&this.$router.push({path:"/message"})}}),created:function(){this.userInfo=JSON.parse(localStorage.getItem("HappyChatUserInfo"))}},_e={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"wrapper"},[s("Header",{attrs:{goback:"true",chatTitle:"群资料"}}),e._v(" "),s("Message-box",{attrs:{messageBoxEvent:this.messageBox.messageBoxEvent,visible:this.messageBox.visible,hasCancel:!1},on:{confirm:e.confirm}},[s("p",{attrs:{slot:"content"},slot:"content"},[e._v(e._s(this.messageBox.message))])]),e._v(" "),s("div",{staticClass:"content"},[s("div",{staticClass:"content-box"},[s("svg",{staticClass:"icon",attrs:{id:"icon",alt:"User Icon","aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icongroup"}})])]),e._v(" "),s("p",[e._v("群名:"),s("br"),s("input",{directives:[{name:"model",rawName:"v-model",value:e.groupInfo.group_name,expression:"groupInfo.group_name"}],attrs:{type:"text",placeholder:"不超过10个字哦",maxlength:"10"},domProps:{value:e.groupInfo.group_name},on:{input:function(t){t.target.composing||e.$set(e.groupInfo,"group_name",t.target.value)}}})]),e._v(" "),s("p",[e._v("群公告:"),s("br"),s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.groupInfo.group_notice,expression:"groupInfo.group_notice"}],attrs:{rows:"5",type:"text",placeholder:"不超过60个字哦",maxlength:"60"},domProps:{value:e.groupInfo.group_notice},on:{input:function(t){t.target.composing||e.$set(e.groupInfo,"group_notice",t.target.value)}}})])]),e._v(" "),s("div",{staticClass:"action",on:{click:e.createGroup}},[s("span",{staticClass:"creat_group"},[e._v("确定建群")])])],1)},staticRenderFns:[]};var Ie=s("VU/8")(ve,_e,!1,function(e){s("q0dT")},"data-v-065991f2",null).exports,be={components:{Header:_,ChatItem:B},data:function(){return{groupInfo:{groupId:""},groupAvator:"",groupMember:[],message:[],inputMsg:"",userInfo:{},btnInfo:"发送"}},computed:h()({},Object(x.c)(["groupInfoGetter","groupMemberGetter"])),watch:{message:function(){this.refresh()}},methods:h()({},Object(x.b)(["getGroupChat","saveGroupChatMsg","addGroupChatRelation"]),{getChatMsg:function(){var e=this,t={groupId:this.groupInfo.groupId};this.getGroupChat(t).then(function(t){if(t.success){if(e.message=t.data.groupMsg,e.$store.commit("groupInfoMutation",t.data.groupInfo[0]),e.$store.commit("groupMemberMutation",t.data.groupMember),!t.data.groupMember.includes(e.userInfo.user_id)){e.addGroupUserRelation();var s={action:"push",message:"您已成功加入此群！",group_avator:e.groupInfoGetter.group_avator,group_name:e.groupInfoGetter.group_name,time:e.groupInfoGetter.creater_time,group_id:e.groupInfoGetter.group_id,type:"group",id:e.groupInfoGetter.group_id};e.$store.commit("updateListMutation",s)}if(0==e.message.length)return;e.message.forEach(function(e){e.time=e.time,e.message=e.message.split(":")[1]})}else e.$message({message:"服务器出错啦",type:"error"})}).catch(function(t){var s=t.error;e.$message({message:s,type:"error"})})},sendMessage:function(){var e=this;return g()(d.a.mark(function t(){var s;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(""!=e.inputMsg.trim()){t.next=2;break}return t.abrupt("return");case 2:s={groupId:e.groupInfo.groupId,group_name:e.groupInfoGetter.group_name,group_avator:e.groupInfoGetter.group_avator,groupMember:e.groupMemberGetter,from_user:e.userInfo.user_id,name:e.userInfo.name,avator:e.userInfo.avator,message:e.inputMsg,time:F((new Date).getTime())},socketWeb.emit("sendGroupMsg",s),e.saveMsgByDB();case 5:case"end":return t.stop()}},t,e)}))()},saveMsgByDB:function(){var e=this,t={groupId:this.groupInfo.groupId,message:this.inputMsg,name:this.userInfo.name,time:F((new Date).getTime())};this.saveGroupChatMsg(t).then(function(t){t.success?e.inputMsg="":e.$message({message:"服务器出错啦",type:"error"})})},addGroupUserRelation:function(){var e={groupId:this.groupInfo.groupId};this.addGroupChatRelation(e)},getMsgBySocket:function(){var e=this;socketWeb.removeAllListeners("getGroupMsg"),socketWeb.on("getGroupMsg",function(t){e.groupMemberGetter.includes(e.userInfo.user_id)&&(t.type="group",t.groupId==e.groupInfo.groupId?(t.chatOfNow=!0,e.$store.commit("updateListMutation",t),e.message.push(t)):e.$store.commit("updateListMutation",t))})},resetUnred:function(){this.$store.commit("resetUnredMutation",this.groupInfo.groupId)},refresh:function(){setTimeout(function(){window.scrollTo(0,document.body.scrollHeight+1e4)},0)}}),created:function(){var e=this;return g()(d.a.mark(function t(){return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.groupInfo.groupId=e.$route.params.group_id,e.userInfo=JSON.parse(localStorage.getItem("HappyChatUserInfo")),t.next=4,e.getChatMsg();case 4:e.resetUnred(),e.getMsgBySocket();case 6:case"end":return t.stop()}},t,e)}))()}},xe={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"wrapper"},[s("Header",{attrs:{goback:"true",groupInfo:"true",chatTitle:e.groupInfoGetter.group_name}}),e._v(" "),s("ul",e._l(e.message,function(t){return s("li",[e.userInfo.user_id===t.from_user?s("ChatItem",{attrs:{href:t.from_user,img:t.avator,me:"true",msg:t.message,name:t.name,time:t.time}}):s("ChatItem",{attrs:{img:t.avator,msg:t.message,href:t.from_user,name:t.name,time:t.time}})],1)}),0),e._v(" "),s("div",{staticClass:"input-msg"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.inputMsg,expression:"inputMsg"}],domProps:{value:e.inputMsg},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.sendMessage(t))},input:function(t){t.target.composing||(e.inputMsg=t.target.value)}}}),e._v(" "),s("p",{staticClass:"btn",class:{enable:""!=e.inputMsg},on:{click:e.sendMessage}},[e._v(e._s(e.btnInfo))])])],1)},staticRenderFns:[]};var Ce=s("VU/8")(be,xe,!1,function(e){s("wlYE")},"data-v-81c48468",null).exports,we={data:function(){return{groupInfo:{},userInfo:{},isMyGroup:null}},computed:{},components:{Header:_},methods:h()({},Object(x.b)(["getGroupInformation","judgeIsInGroup","exitChatGroup"]),{getGroupInfo:function(){var e=this,t={groupId:this.$route.params.group_id};this.getGroupInformation(t).then(function(t){t.success?e.groupInfo=t.data.groupInfo[0]:e.$message({message:"服务器出错啦",type:"error"})}).catch(function(t){console.log("err",t);var s=t.error;e.$message({message:s,type:"error"})})},isInGroup:function(){var e=this,t={group_id:this.$route.params.group_id};this.judgeIsInGroup(t).then(function(t){t.success?e.isMyGroup=0!==t.data.group_user.length:e.$message({message:"服务器出错啦",type:"error"})}).catch(function(t){console.log("err",t);var s=t.error;e.$message({message:s,type:"error"})})},exitGroup:function(){var e=this,t={group_id:this.$route.params.group_id};this.exitChatGroup(t).then(function(t){var s={action:"delete",id:e.$route.params.group_id};t.success?(e.$store.commit("updateListMutation",s),e.$router.push("/message")):e.$message({message:"服务器出错啦",type:"error"})}).catch(function(t){console.log("err",t);var s=t.error;e.$message({message:s,type:"error"})})},goChat:function(){var e="/group_chat/"+this.$route.params.group_id;this.$router.push(e)}}),created:function(){var e=this;return g()(d.a.mark(function t(){return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.userInfo=JSON.parse(localStorage.getItem("HappyChatUserInfo")),t.next=3,e.isInGroup();case 3:e.getGroupInfo();case 4:case"end":return t.stop()}},t,e)}))()}},ye={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"wrapper"},[s("Header",{attrs:{goback:"true",chatTitle:"群资料"}}),e._v(" "),s("div",{staticClass:"content"},[s("div",{staticClass:"content-box"},[s("svg",{staticClass:"icon",attrs:{id:"icon",alt:"User Icon","aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icongroup"}})])]),e._v(" "),s("p",[s("span",[e._v("群名")]),e._v("："+e._s(this.groupInfo.group_name)+"\n\t\t")]),e._v(" "),s("p",[s("span",[e._v("群创建者")]),e._v("："+e._s(this.groupInfo.group_creater)+"\n\t\t")]),e._v(" "),s("p",[s("span",[e._v("群创建时间")]),e._v("："+e._s(this.groupInfo.creater_time)+"\n\t\t")]),e._v(" "),s("p",[s("span",[e._v("群公告")]),e._v("："+e._s(this.groupInfo.group_notice)+"\n\t\t")])]),e._v(" "),s("div",{staticClass:"action"},[e.isMyGroup?s("span",{staticClass:"del-group",on:{click:e.exitGroup}},[e._v("退出群聊")]):e._e(),e._v(" "),s("span",{staticClass:"go-chat",on:{click:e.goChat}},[e._v(e._s(e.isMyGroup?"进入群聊":"加入群聊"))])])],1)},staticRenderFns:[]};var ke=s("VU/8")(we,ye,!1,function(e){s("Rj7X")},"data-v-41465362",null).exports;a.a.use(m.a);var Me=new m.a({routes:[{path:"/",redirect:"/login"},{path:"/robot",component:E},{path:"/login",component:D},{path:"/register",component:R},{path:"/activate/:code",component:A},{path:"/message",component:V},{path:"/add",component:X},{path:"/add_seach/user/:username",component:K},{path:"/user_info/:user_id",component:te},{path:"/user_info/verify/:user_id",component:re},{path:"/contact_list",component:oe},{path:"/contact_list/new_friends",component:me},{path:"/private_chat/:user_id",component:fe},{path:"/me",component:he},{path:"/creat_group",component:Ie},{path:"/group_chat/:group_id",component:Ce},{path:"/group_info/:group_id",component:ke},{path:"/add_seach/group/:groupname",component:K}]}),Be=["/login","/register","/activate"];Me.beforeEach(function(e,t,s){var n=Be.some(function(t){if(e.path.indexOf(t)>=0)return!0});localStorage.HappyChatUserToken?n?s("/robot"):s():n?s():s("/login")});var $e=Me,Fe=s("//Fk"),Te=s.n(Fe);a.a.prototype.axios=b.a;var Ge=b.a.create({baseURL:"http://chat.chengxinsong.cn",timeout:1e4});Ge.interceptors.request.use(function(e){var t=localStorage.getItem("HappyChatUserToken");return t&&(e.headers.common.Authorization="Bearer "+t),e},function(e){return Te.a.reject(e)}),Ge.interceptors.response.use(function(e){var t=e.data;return t.data,t},function(e){return{code:-1,msg:"网络异常"}});var Ee,Ue,Ne=function(e){var t={params:e};return Ge.get("/api/chat/robot",t)},Re=function(e){return Ge.post("/api/chat/register",e)},Le=function(e){var t={params:e};return Ge.get("/api/chat/activate",t)},He=function(e){return Ge.post("/api/chat/login",e)},Se=function(e){var t={params:e};return Ge.get("/api/chat/message",t)},Oe=function(e){var t={params:e};return Ge.get("/api/chat/find_people",t)},De=function(e){var t={params:e};return Ge.get("/api/chat/user_info",t)},Pe=function(e){var t={params:e};return Ge.get("/api/chat/get_newfriends",t)},je=function(e){var t={params:e};return Ge.get("/api/chat/get_friends",t)},Ae=function(e){var t={params:e};return Ge.get("/api/chat/get_groups",t)},We=function(e){var t={params:e};return Ge.get("/api/chat/is_friend",t)},qe=function(e){return Ge.post("/api/chat/insert_newfriends",e)},Ve=function(e){return Ge.post("/api/chat/be_friend",e)},Je=function(e){return Ge.put("/api/chat/update_newfriends",e)},ze=function(e){var t={params:e};return Ge.get("/api/chat/private_detail",t)},Xe=function(e){return Ge.post("/api/chat/private_save_msg",e)},Qe=function(e){return Ge.put("/api/chat/editor_remark",e)},Ye=function(e){return Ge.put("/api/chat/editor_info",e)},Ke=function(e){var t={params:e};return Ge.delete("/api/chat/del_friend",t)},Ze=function(e){return Ge.post("/api/chat/create_group",e)},et=function(e){return Ge.post("/api/chat/join_group",e)},tt=function(e){var t={params:e};return Ge.get("/api/chat/group_chat",t)},st=function(e){return Ge.post("/api/chat/group_chat_msg",e)},nt=function(e){return Ge.post("/api/chat/group_chat_relation",e)},rt=function(e){var t={params:e};return Ge.get("/api/chat/get_group_info",t)},at=function(e){var t={params:e};return Ge.get("/api/chat/is_in_group",t)},it=function(e){var t={params:e};return Ge.delete("/api/chat/exit_group",t)},ot=function(e,t){var s=e.commit;return Ne(t).then(function(e){if(e)if(1e5===e.data.code)s("robotMsgMutation",{message:e.data.text,user:"robot"});else if(2e5===e.data.code){var t=e.data.text+e.data.url;s("robotMsgMutation",{message:t,user:"robot"})}else e.data.code,s("robotMsgMutation",{message:"暂不支持此类对话",user:"robot"})}).catch(function(e){console.log(e)})},ct=function(e,t){e.commit;return Re(t).then(function(e){return e}).catch(function(e){console.log(e)})},ut=function(e,t){e.commit;return Le(t).then(function(e){return e}).catch(function(e){console.log(e)})},mt=function(e,t){e.commit;return He(t).then(function(e){return e}).catch(function(e){console.log(e)})},pt=function(e,t){e.commit;return Oe(t).then(function(e){return e}).catch(function(e){console.log(e)})},dt=function(e,t){e.commit;return De(t).then(function(e){return e}).catch(function(e){console.log(e)})},ft=function(e,t){var s=e.commit;return De(t).then(function(e){s("someOneInfoMutation",e.data.userInfo[0])}).catch(function(e){console.log(e)})},gt=function(e,t){var s=e.commit;return Pe(t).then(function(e){console.log(e,"新朋友列表---------------------------------------------"),s("newFriendMutation",e.data.newFriends)}).catch(function(e){console.log(e)})},lt=function(e,t){e.commit;return je(t).then(function(e){return console.log(e,"朋友列表---------------------------------------------"),e}).catch(function(e){console.log(e)})},ht=function(e,t){e.commit;return Ae(t).then(function(e){return console.log(e,"群列表---------------------------------------------"),e}).catch(function(e){console.log(e)})},vt=function(e,t){e.commit;return We(t).then(function(e){return e}).catch(function(e){console.log(e)})},_t=function(e,t){var s=e.commit;return Se(t).then(function(e){if(console.log("res",e),e.success){var t=e.data.groupList,n=e.data.privateList;t.forEach(function(e){e.type="group",e.time=e.time?e.time:e.creater_time,e.id=e.group_id}),n.forEach(function(e){e.type="private",e.time=e.time?e.time:e.be_friend_time,e.id=e.other_user_id});var r=t.concat(n);r.sort(function(e,t){return t.time-e.time}),console.log(r,"-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-"),s("msgListMutation",r)}}).catch(function(e){console.log(e)})},It=function(e,t){e.commit;return qe(t).then(function(e){return e}).catch(function(e){console.log(e)})},bt=function(e,t){e.commit;return Ve(t).then(function(e){return e}).catch(function(e){console.log(e)})},xt=function(e,t){e.commit;return Je(t).then(function(e){return e}).catch(function(e){console.log(e)})},Ct=function(e,t){e.commit;return ze(t).then(function(e){return e}).catch(function(e){console.log(e)})},wt=function(e,t){e.commit;return Xe(t).then(function(e){return e}).catch(function(e){console.log(e)})},yt=function(e,t){e.commit;return Qe(t).then(function(e){return e}).catch(function(e){console.log(e)})},kt=function(e,t){e.commit;return Ye(t).then(function(e){return e}).catch(function(e){console.log(e)})},Mt=function(e,t){e.commit;return Ke(t).then(function(e){return e}).catch(function(e){console.log(e)})},Bt=function(e,t){e.commit;return Ze(t).then(function(e){return e}).catch(function(e){console.log(e)})},$t=function(e,t){e.commit;return et(t).then(function(e){return e}).catch(function(e){console.log(e)})},Ft=function(e,t){e.commit;return tt(t).then(function(e){return e}).catch(function(e){console.log(e)})},Tt=function(e,t){e.commit;return st(t).then(function(e){return e}).catch(function(e){console.log(e)})},Gt=function(e,t){var s=e.commit;return nt(t).then(function(e){e.success&&(console.log("group_chat_relation",e),s("groupMemberMutation",e.data.groupMember))}).catch(function(e){console.log(e)})},Et=function(e,t){e.commit;return rt(t).then(function(e){return e}).catch(function(e){console.log(e)})},Ut=function(e,t){e.commit;return at(t).then(function(e){return e}).catch(function(e){console.log(e)})},Nt=function(e,t){e.commit;return it(t).then(function(e){return e}).catch(function(e){console.log(e)})},Rt=function(e){return e.robot.robotmsg},Lt=function(e){return e.common.newFriend},Ht=function(e){return e.message.msgList},St=function(e){return e.message.firstLoad},Ot=function(e){return e.message.someOneInfo},Dt=function(e){return e.common.tabTips},Pt=function(e){return e.message.groupMember},jt=function(e){return e.message.groupInfo},At=s("bOdI"),Wt=s.n(At),qt={state:{systemName:"XXX系统",newFriend:[],tabTips:{addFriendReq:""}},mutations:(Ee={},Wt()(Ee,"newFriendMutation",function(e,t){e.newFriend=t}),Wt()(Ee,"friendReqTipsMutation",function(e,t){e.tabTips.addFriendReq=t?"tips":""}),Ee)},Vt={state:{robotmsg:[{message:"hi , 欢迎与我聊天，问我问题哦！",user:"robot"}]},mutations:Wt()({},"robotMsgMutation",function(e,t){e.robotmsg.push(t)})},Jt={state:{firstLoad:!0,msgList:[],someOneInfo:{},groupMember:[],groupInfo:[]},mutations:(Ue={},Wt()(Ue,"firstLoadMutation",function(e,t){e.firstLoad=t}),Wt()(Ue,"msgListMutation",function(e,t){e.msgList=t}),Wt()(Ue,"updateListMutation",function(e,t){if("push"===t.action)return t.unread=1,void e.msgList.push(t);if("delete"!==t.action)if("private"===t.type){if(0===e.msgList.filter(function(e){return e.other_user_id==t.from_user}).length&&"request"===t.action)return t.unread=1,t.other_user_id=t.from_user,t.id=t.from_user,delete t.from_user,delete t.to_user,void e.msgList.push(t);e.msgList.forEach(function(e){if(e.other_user_id==t.from_user){if(e.message=t.name+" : "+t.message,e.time=t.time,e.name=t.name,e.avator=t.avator,t.chatOfNow)return;e.unread?e.unread+=1:e.unread=1}else e.other_user_id==t.to_user&&(e.message=t.name+" : "+t.message,e.time=t.time)})}else"group"===t.type&&e.msgList.forEach(function(e){e.group_id==t.groupId&&(e.message=t.name+" : "+t.message,e.time=t.time,e.group_name=t.group_name,e.group_avator=t.group_avator,e.id=t.groupId,t.chatOfNow?e.unread=null:e.unread?e.unread+=1:e.unread=1)});else for(var s=0;s<e.msgList.length;s++)e.msgList[s].id==t.id&&e.msgList.splice(s,1)}),Wt()(Ue,"resetUnredMutation",function(e,t){e.msgList.forEach(function(e){e.id==t&&(e.unread=null)})}),Wt()(Ue,"someOneInfoMutation",function(e,t){e.someOneInfo=t}),Wt()(Ue,"groupMemberMutation",function(e,t){e.groupMember=t}),Wt()(Ue,"groupInfoMutation",function(e,t){e.groupInfo=t}),Ue)};a.a.use(x.a);var zt=new x.a.Store({actions:n,getters:r,modules:{common:qt,robot:Vt,message:Jt}}),Xt={name:"MessageBox",props:{messageBoxEvent:{type:String},visible:{type:Boolean,default:!1},title:{type:String,default:"提示"},canInput:{type:Boolean,default:!1},canEditorInfo:{type:Boolean,default:!1},hasCancel:{type:Boolean,default:!0},myInfo:{type:Object}},components:{},data:function(){return{canInputText:""}},computed:{},watch:{},methods:{cancel:function(){this.$emit("cancel",this.messageBoxEvent)},confirm:function(){if(!this.canInput)return this.canEditorInfo?(console.log("myInfo",this.myInfo),this.myInfo.sex="男"===this.myInfo.sex?0:1,void this.$emit("confirm",{messageBoxEvent:this.messageBoxEvent,myInfo:this.myInfo})):void this.$emit("confirm",this.messageBoxEvent);this.$emit("confirm",{messageBoxEvent:this.messageBoxEvent,canInputText:this.canInputText})}}},Qt={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.visible?s("div",{staticClass:"message-box"},[s("div",{staticClass:"bg"}),e._v(" "),s("div",{staticClass:"message-box-wrapper"},[s("h1",[e._v(" "+e._s(e.title))]),e._v(" "),e.canInput?s("input",{directives:[{name:"model",rawName:"v-model",value:e.canInputText,expression:"canInputText"}],attrs:{type:"text",maxlength:"10",placeholder:"最多10个字哦"},domProps:{value:e.canInputText},on:{input:function(t){t.target.composing||(e.canInputText=t.target.value)}}}):e._e(),e._v(" "),e.canEditorInfo?s("form",{staticClass:"editor-info"},[s("div",{},[s("span",[e._v("github:")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.myInfo.github,expression:"myInfo.github"}],attrs:{type:"text"},domProps:{value:e.myInfo.github},on:{input:function(t){t.target.composing||e.$set(e.myInfo,"github",t.target.value)}}})]),e._v(" "),s("div",{},[s("span",[e._v("website:")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.myInfo.website,expression:"myInfo.website"}],attrs:{type:"text"},domProps:{value:e.myInfo.website},on:{input:function(t){t.target.composing||e.$set(e.myInfo,"website",t.target.value)}}})]),e._v(" "),s("div",{staticClass:"info-sex"},[s("span",[e._v("性别:")]),e._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:e.myInfo.sex,expression:"myInfo.sex"}],on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(e.myInfo,"sex",t.target.multiple?s:s[0])}}},[s("option",{attrs:{disabled:"",value:""}},[e._v("性别")]),e._v(" "),s("option",[e._v("男")]),e._v(" "),s("option",[e._v("女")])])]),e._v(" "),s("div",{},[s("span",[e._v("来自:")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.myInfo.place,expression:"myInfo.place"}],attrs:{type:"text",maxlength:"12"},domProps:{value:e.myInfo.place},on:{input:function(t){t.target.composing||e.$set(e.myInfo,"place",t.target.value)}}})])]):s("p",{staticClass:"content"},[e._t("content")],2),e._v(" "),e.hasCancel?s("div",{staticClass:"hasCancel"},[s("p",{on:{click:e.cancel}},[e._v("取消")]),e._v(" "),s("p",{on:{click:e.confirm}},[e._v("确定")])]):s("div",{staticClass:"noCancel"},[s("p",{on:{click:e.confirm}},[e._v("确定")])])])]):e._e()},staticRenderFns:[]};var Yt=s("VU/8")(Xt,Qt,!1,function(e){s("QgOc")},"data-v-06f2fe0a",null).exports,Kt={name:"Message",data:function(){return{message:"",type:"success",time:3e3,isShow:!0}},mounted:function(){this.close()},methods:{close:function(){var e=this;window.setTimeout(function(){e.isShow=!1},this.time)}}},Zt={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.isShow?s("div",{staticClass:"tips"},["success"===e.type?s("div",{staticClass:"success-tip"},[s("svg",{staticClass:"icon",staticStyle:{"font-size":"0.2rem"},attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#iconsuccess"}})]),e._v(" "+e._s(e.message)+"\n\t")]):e._e(),e._v(" "),"warn"===e.type?s("div",{staticClass:"warn-tip"},[s("svg",{staticClass:"icon",staticStyle:{"font-size":"0.2rem"},attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#iconwarn"}})]),e._v(" "+e._s(e.message)+"\n\t")]):e._e(),e._v(" "),"error"===e.type?s("div",{staticClass:"error-tip"},[s("svg",{staticClass:"icon",staticStyle:{"font-size":"0.2rem"},attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#iconerror"}})]),e._v(" "+e._s(e.message)+"\n\t")]):e._e()]):e._e()},staticRenderFns:[]};var es=s("VU/8")(Kt,Zt,!1,function(e){s("oaWQ")},"data-v-8532395e",null).exports;es.installMessage=function(e){void 0===e||null===e?e={message:""}:"string"!=typeof e&&"number"!=typeof e||(e={message:e});var t=new(a.a.extend(es))({data:e}).$mount();document.querySelector("body").appendChild(t.$el)};var ts=es,ss=function(e){e.component(ts.name,ts),e.component(Yt.name,Yt),e.prototype.$message=ts.installMessage};a.a.use(ss),a.a.config.productionTip=!1,new a.a({el:"#app",router:$e,store:zt,components:{App:u},template:"<App/>"})},Nact:function(e,t){},NjBh:function(e,t){},QgOc:function(e,t){},"R/S2":function(e,t){},Rj7X:function(e,t){},lneO:function(e,t){},lw7P:function(e,t){},oaWQ:function(e,t){},"p+B0":function(e,t){},q0dT:function(e,t){},tLs2:function(e,t){},wlYE:function(e,t){},xdN8:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.daf1444c703e39da55fd.js.map